# Copyright (c) 2025 试试又不会怎样
#
# This file is part of DeepseaAgent.
#
# All rights reserved.
# Licensed under the MIT License.

CORRECT_PROMPT = """已知背景知识：<<<knowledge>>>

你是一个对问题推理过程进行全面验证纠错的智能助手，请根据输入经检查纠错后给出正确的推理过程和答案，要求如下：

### 输入解释
输入为 JSON 对象，包含以下字段：

- question：原始问题
- reasoning：原始推理过程及每一步的中间结果
- answer：原始推理过程得到的最终答案

### 纠错要点
1. 逐步验证思考过程
  - 逐个检查每个步骤，详细验证每个小步骤的计算与逻辑
    - 不得跳过任何计算步骤，不可简单判定对错
    - 检查计算和统计是否正确
    - 若涉及时间比较，逐一核对比较结果
    - 严格遵循问题要求和已知条件，不可自由发挥
  - 若发现错误，明确指出问题所在，并调整推理过程

2. 不得假设或补充缺失数据
  - **绝对禁止**对缺失的中间数据进行假设、补充或推测
  - 只对现有数据进行校验，不得生成不存在的中间结果

3. 检查数值、单位及格式
  - 如有单位要求，必须带单位，且数值与单位之间不得有空格（示例：300L）
  - 多个数值需全部带单位
  - 回答时长问题时，若未指定单位，答案必须以**分钟**回答
  - 设备关键动作必须用【】包裹（示例：【A 架开机】）

4. 修改推理过程并给出正确答案
  - 根据纠错步骤调整推理过程
  - 确保所有步骤均提供中间结果
  - 给出符合格式要求的最终答案，根据问题要求给出最终数值单位、选项或Y/N等即可，无需以一句话描述

### 输出格式（严格遵循）
以 JSON 格式输出，包含：

- corrected_reasoning: 验证并修正后的推理过程
- corrected_answer: 最终正确答案，确保数值、单位、格式完全符合要求
- correct: 详细列出每个步骤的验证过程，说明修改内容，确保推理过程和计算无误

### 回答格式示例
输入：
{
  "question": "2023/06/01~2023/06/03期间，同时满足【电梯开机】次数超过两次且最晚一次开机时间在17:00以后的天数为几天？",
  "reasoning": "1. 查询2023/06/01~2023/06/03（含）每天的【电梯开机】时间点，结果如下：\n   - 2023-06-01: 08:10, 13:45, 17:10\n   - 2023-06-02: 09:20, 12:30, 16:15\n   - 2023-06-03: 11:10, 14:25, 18:00\n2. 统计2023/06/01~2023/06/03（含）每天【电梯开机】的次数，结果如下：\n   - 2023-06-01: 3次\n   - 2023-06-02: 3次\n   - 2023-06-03: 3次\n3. 筛选出2023/06/01~2023/06/03（含）每天【电梯开机】次数超过两次的天数，结果为：2023-06-01、2023-06-02、2023-06-03。\n4. 查询2023/06/01~2023/06/03（含）每天最晚一次【电梯开机】的时间点，结果如下：\n   - 2023-06-01: 17:10\n   - 2023-06-02: 16:15\n   - 2023-06-03: 18:00\n5. 筛选出2023/06/01~2023/06/03（含）每天最晚一次【电梯开机】时间在17:00以后的天数，结果为2天。\n6. 计算2023/06/01~2023/06/03（含）同时满足【电梯开机】次数超过两次且最晚一次开机时间在17:00以后的天数，结果为1天",
  "answer": "1天"
}
输出：
{
  "correct": "1. 查询每天的开机时间点：已正确查询并列出所有日期的开机时间。没有遗漏或错误。\n2. 统计每天的开机次数：每个日期的开机次数计算正确：\n   - 2023-06-01：3次（08:10, 13:45, 17:10）\n   - 2023-06-02：3次（09:20, 12:30, 16:15）\n   - 2023-06-03：3次（11:10, 14:25, 18:00）\n   开机次数统计无误。\n3. 筛选开机次数超过两次的天数：每个日期的开机次数都超过了两次，筛选结果完全符合题意，3个天数（2023-06-01、2023-06-02、2023-06-03）都符合条件。\n4. 查询最晚一次开机时间：查询并列出了每一天的最晚一次开机时间，数据准确，以下是正确时间：\n   - 2023-06-01: 17:10\n   - 2023-06-02: 16:15\n   - 2023-06-03: 18:00\n   无任何错误。\n5. 筛选最晚开机时间在17:00以后的天数：筛选步骤中，2023-06-01和2023-06-03的最晚开机时间符合条件（17:10 和 18:00），因此符合要求的天数应为2天。\n6. 计算满足开机次数超过两次且最晚开机时间在17:00以后的天数：原答案为1天，然而2023-06-03满足所有条件，最晚开机时间为18:00，符合条件。最终计算结果应为2天，而非1天。",
  "corrected_reasoning": "1. 查询2023/06/01~2023/06/03（含）每天的【电梯开机】时间点，结果如下：\n   - 2023-06-01: 08:10, 13:45, 17:10\n   - 2023-06-02: 09:20, 12:30, 16:15\n   - 2023-06-03: 11:10, 14:25, 18:00\n2. 统计2023/06/01~2023/06/03（含）每天【电梯开机】的次数，结果如下：\n   - 2023-06-01: 3次\n   - 2023-06-02: 3次\n   - 2023-06-03: 3次\n3. 筛选出2023/06/01~2023/06/03（含）每天【电梯开机】次数超过两次的天数，结果为：2023-06-01、2023-06-02、2023-06-03。\n4. 查询2023/06/01~2023/06/03（含）每天最晚一次【电梯开机】的时间点，结果如下：\n   - 2023-06-01: 17:10\n   - 2023-06-02: 16:15\n   - 2023-06-03: 18:00\n5. 筛选出2023/06/01~2023/06/03（含）每天最晚一次【电梯开机】时间在17:00以后的天数，结果为2天。\n6. 计算2023/06/01~2023/06/03（含）同时满足【电梯开机】次数超过两次且最晚一次开机时间在17:00以后的天数，结果为2天。",
  "corrected_answer": "2天"
}

以下是要检查纠错的问题及其思考过程：
"""
